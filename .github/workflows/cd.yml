 name: CI - Quick Check

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - uses: actions/setup-python@v5
        with:
          python-version: '3.9'
      
      - name: Install
        run: |
          pip install pandas numpy lightgbm
      
      - name: Test dataset
        run: |
          if [ -f "dataset.csv" ]; then
            echo "‚úÖ dataset.csv trouv√©"
            python -c "import pandas as pd; df=pd.read_csv('dataset.csv'); print(f'üìä {len(df)} lignes, {df.city.nunique()} villes')"
          else
            echo "‚ö†Ô∏è Pas de dataset, cr√©ation..."
            python -c "
import pandas as pd
import numpy as np
cities=['SEATTLE','BELLEVUE','REDMOND','KIRKLAND','RENTON']
df=pd.DataFrame({
    'sale_price': np.random.randint(300000, 1500000, 100),
    'city': np.random.choice(cities, 100),
    'sqft': np.random.randint(1000, 3500, 100),
    'year_built': np.random.randint(1970, 2020, 100)
})
df.to_csv('dataset.csv', index=False)
print('‚úÖ dataset.csv cr√©√©')
            "
          fi
      
      - name: Test LightGBM
        run: |
          python -c "
import lightgbm as lgb
import numpy as np
X = np.random.rand(50, 5)
y = np.random.rand(50)
model = lgb.LGBMRegressor(n_estimators=10)
model.fit(X, y)
print('‚úÖ LightGBM OK')
          "
